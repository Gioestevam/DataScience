<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <title>Data Science</title>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.js"></script>
        <style>
            a {
                text-decoration: none;
                color: black;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div>
                <h1>Data Science</h1>
                <button class="waves-effect btn">
                    <a href="/">
                        Voltar
                    </a>
                </button>
            </div>
            <div class="row">
                <canvas id="GraphicChart" width="600" height="300"></canvas>
            </div>

        </div>
    </body>
    <script>
        var ctx = document.getElementById("GraphicChart");
        var labels = {{ labelsColumns|safe }};
        var datas  = {{ valuesColumns|safe }};
        var typeChart = '{{ typeChart|safe }}';
        
        datas      = JSON.stringify(datas).replace('[[', '[').replace(']]', ']');
        datas      = JSON.parse(datas);
        colorsDatas = '#015EA0';

        if (typeChart != 'line') {
            colorsDatas = [];
            labels.forEach(element => {
                colorsDatas.push(getRandomColor());
            });
        }
        
        var GraphicChart = new Chart(ctx, {
            type: typeChart,
            data: {
                labels: labels,
                datasets: [{
                    label: 'Graficos',
                    data: datas,
                    backgroundColor: colorsDatas,
                    borderColor: colorsDatas,
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });

        function getRandomColor() {
            var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
    </script>
</html>